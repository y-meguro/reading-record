{"version":3,"sources":["../src/2.1.5.js"],"names":["toZenkaku","string","convert","toString","reporter","context","Syntax","RuleError","fixer","report","getSource","dictRule","prh","rulePaths","path","join","__dirname","originalStrRule","Str","node","text","matches","forEach","match","index","fix","replaceTextRange","length","module","exports","linter"],"mappings":"AAAA;AACA;AACA;;;;;;;;;;AASA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA;;;;;AAKA,SAASA,SAAT,CAAmBC,MAAnB,EAA2B;AACvB,SAAO,mBAAKA,MAAL,EACFC,OADE,CACM,IADN,EACY,IADZ,EAEFC,QAFE,EAAP;AAGH;;AAED,SAASC,QAAT,CAAkBC,OAAlB,EAA2B;AAAA,MACjBC,MADiB,GAC+BD,OAD/B,CACjBC,MADiB;AAAA,MACTC,SADS,GAC+BF,OAD/B,CACTE,SADS;AAAA,MACEC,KADF,GAC+BH,OAD/B,CACEG,KADF;AAAA,MACSC,MADT,GAC+BJ,OAD/B,CACSI,MADT;AAAA,MACiBC,SADjB,GAC+BL,OAD/B,CACiBK,SADjB,EAEvB;;AACA,MAAIC,QAAQ,GAAGC,yBAAIJ,KAAJ,CAAUH,OAAV,EAAmB;AAC9BQ,IAAAA,SAAS,EAAE,CAACC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,WAAnC,CAAD;AADmB,GAAnB,CAAf;;AAGA,MAAIC,eAAe,GAAGN,QAAQ,CAACL,MAAM,CAACY,GAAR,CAA9B,CANuB,CAOvB;;AACAP,EAAAA,QAAQ,CAACL,MAAM,CAACY,GAAR,CAAR,GAAuB,UAASC,IAAT,EAAe;AAClCF,IAAAA,eAAe,CAACE,IAAD,CAAf;;AACA,QAAI,CAAC,iCAAkBA,IAAlB,EAAwBd,OAAxB,CAAL,EAAuC;AACnC;AACH;;AACD,QAAMe,IAAI,GAAGV,SAAS,CAACS,IAAD,CAAtB;AACA,QAAME,OAAO,GAAG,sCAAqBD,IAArB,EAA2B,qBAA3B,CAAhB;AACAC,IAAAA,OAAO,CAACC,OAAR,CAAgB,UAAAC,KAAK,EAAI;AAAA,UACbC,KADa,GACGD,KADH,CACbC,KADa;AAAA,UACNJ,IADM,GACGG,KADH,CACNH,IADM;AAErBX,MAAAA,MAAM,CACFU,IADE,EAEF,IAAIZ,SAAJ,CAAc,kBAAd,EAAkC;AAC9BiB,QAAAA,KAAK,EAAEA,KADuB;AAE9BC,QAAAA,GAAG,EAAEjB,KAAK,CAACkB,gBAAN,CAAuB,CAACF,KAAD,EAAQA,KAAK,GAAGJ,IAAI,CAACO,MAArB,CAAvB,EAAqD3B,SAAS,CAACoB,IAAD,CAA9D;AAFyB,OAAlC,CAFE,CAAN;AAOH,KATD;AAUH,GAjBD;;AAkBA,SAAOT,QAAP;AACH;;AACDiB,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,MAAM,EAAE1B,QADK;AAEbI,EAAAA,KAAK,EAAEJ;AAFM,CAAjB","sourcesContent":["// LICENSE : MIT\n\"use strict\";\n/*\n2.1.5.カタカナ\nカタカナは「全角」で表記します。\n半角カタカナは特殊な用途を除いて、原則として使いません。\n\nHalfwidth Katakana variants（半角片仮名）\n\\uFF65-\\uFF9F とする\nhttp://www.asahi-net.or.jp/~ax2s-kmtn/ref/unicode/uff00.html\n */\nimport { isUserWrittenNode } from \"./util/node-util\";\nimport { hanKarakanaRegExp } from \"./util/regexp\";\nimport prh from \"textlint-rule-prh\";\nimport path from \"path\";\nimport { matchCaptureGroupAll } from \"match-index\";\nimport moji from \"moji\";\n/**\n * 半角カタカナを全角カタカナに変換\n *\n * @param {String} str 変換したい文字列\n */\nfunction toZenkaku(string) {\n    return moji(string)\n        .convert(\"HK\", \"ZK\")\n        .toString();\n}\n\nfunction reporter(context) {\n    let { Syntax, RuleError, fixer, report, getSource } = context;\n    // 辞書ベースのカタカタ表記のチェックを行う\n    let dictRule = prh.fixer(context, {\n        rulePaths: [path.join(__dirname, \"..\", \"dict\", \"2.1.5.yml\")]\n    });\n    let originalStrRule = dictRule[Syntax.Str];\n    // 半角カタカナの使用をチェックする\n    dictRule[Syntax.Str] = function(node) {\n        originalStrRule(node);\n        if (!isUserWrittenNode(node, context)) {\n            return;\n        }\n        const text = getSource(node);\n        const matches = matchCaptureGroupAll(text, /([\\uFF65-\\uFF9F]+)/g);\n        matches.forEach(match => {\n            const { index, text } = match;\n            report(\n                node,\n                new RuleError(\"カタカナは「全角」で表記します。\", {\n                    index: index,\n                    fix: fixer.replaceTextRange([index, index + text.length], toZenkaku(text))\n                })\n            );\n        });\n    };\n    return dictRule;\n}\nmodule.exports = {\n    linter: reporter,\n    fixer: reporter\n};\n"],"file":"2.1.5.js"}